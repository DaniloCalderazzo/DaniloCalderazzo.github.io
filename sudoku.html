<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sudoku Zen</title>
    <style>
        /* --- 1. ESTILOS GENERALES Y PALETA --- */
        :root {
            --primary: #9cb3c9;       /* Tu color base */
            --primary-dark: #78909c;  /* Un poco m√°s oscuro para contrastes */
            --bg-color: #f0f4f8;      /* Fondo muy suave */
            --board-bg: #ffffff;
            --text-color: #455a64;
            --accent-blue: #e1f5fe;   /* Para filas/columnas */
            --accent-select: #bbdefb; /* Selecci√≥n */
            --error-color: #ef9a9a;
            --success-color: #a5d6a7;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            overflow-y: auto; /* Scroll suave */
        }

        h1 {
            margin: 10px 0;
            font-weight: 300;
            color: var(--primary-dark);
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 1.8rem;
        }

        /* --- 2. BARRA DE DIFICULTAD (P√≠ldoras) --- */
        #difficulty-controls {
            margin-bottom: 15px;
            display: flex;
            background: white;
            padding: 5px;
            border-radius: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .diff-btn {
            padding: 8px 20px;
            border: none;
            background: transparent;
            color: var(--primary-dark);
            font-weight: 600;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .diff-btn.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        }

        /* --- 3. BARRA DE ESTAD√çSTICAS (RACHA) --- */
        #stats-bar {
            display: flex;
            justify-content: space-between;
            width: 95vw;
            max-width: 400px;
            margin-bottom: 10px;
            font-size: 1rem;
            font-weight: bold;
            color: var(--primary-dark);
        }

        .streak-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .fire-icon { transition: transform 0.2s; }
        .streak-animate { transform: scale(1.5); color: #ff9800; }

        /* --- 4. TABLERO --- */
        #board {
            width: 95vw;
            max-width: 400px;
            aspect-ratio: 1 / 1;
            background-color: var(--primary-dark); /* Color de las l√≠neas */
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(9, 1fr);
            border: 3px solid var(--primary-dark);
            border-radius: 8px; /* Bordes suaves externos */
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(156, 179, 201, 0.4); /* Sombra con tu color */
            gap: 1px; /* Espacio para las l√≠neas finas */
        }

        .tile {
            background-color: var(--board-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3rem;
            font-weight: 500;
            cursor: pointer;
            user-select: none;
            position: relative; /* Para las notas */
            transition: background-color 0.1s;
        }

        /* L√≠neas gruesas internas usando m√°rgenes o bordes */
        .tile:nth-child(3n) { border-right: 2px solid var(--primary-dark); }
        .tile:nth-child(9n) { border-right: none; } /* Correcci√≥n borde final */
        
        /* L√≠neas horizontales gruesas */
        .horizontal-line { border-bottom: 2px solid var(--primary-dark); }

        /* Estados de las casillas */
        .tile-start { 
            background-color: #fcfcfc; 
            color: #263238; 
            font-weight: 700; 
        }
        
        .tile-selected {
            background-color: var(--primary) !important;
            color: white !important;
        }

        .highlight-related { background-color: #eceff1; } /* Gris muy tenue */
        .highlight-same { 
            background-color: var(--primary); 
            opacity: 0.7; 
            color: white; 
        }

        .tile-correct { color: var(--primary-dark); } /* Azul elegante */
        .tile-incorrect { 
            background-color: var(--error-color); 
            color: white;
            animation: shake 0.3s; 
        }

        /* --- 5. CONTROLES Y TECLADO --- */
        #controls-container {
            width: 95vw;
            max-width: 400px;
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Herramientas circulares */
        #tools-row {
            display: flex;
            justify-content: space-evenly;
        }

        .tool-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background-color: white;
            color: var(--primary-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .tool-btn:active { transform: scale(0.95); }

        /* Estados activos de herramientas */
        .pencil-active { 
            background-color: var(--primary) !important; 
            color: white !important; 
            box-shadow: 0 0 10px var(--primary);
        }
        
        .fast-active { 
            background-color: #7e57c2 !important; /* Violeta suave */
            color: white !important; 
            box-shadow: 0 0 10px #7e57c2;
        }

        /* Teclado num√©rico */
        #numbers-row {
            display: flex;
            justify-content: space-between;
        }

        .number-key {
            width: 10%;
            aspect-ratio: 1/1.3;
            border: none;
            border-radius: 8px;
            background-color: white;
            color: var(--primary-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.6rem;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }

        .number-key:active { background-color: #eceff1; }
        
        .number-selected {
            background-color: var(--primary) !important;
            color: white !important;
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(156, 179, 201, 0.5);
        }

        .number-done {
            opacity: 0.2;
            pointer-events: none;
            box-shadow: none;
            background: #e0e0e0;
        }

        /* --- NOTAS (L√ÅPIZ) --- */
        .pencil-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            width: 100%; height: 100%;
            pointer-events: none;
        }
        .pencil-number {
            display: flex; justify-content: center; align-items: center;
            font-size: 10px; color: var(--primary-dark);
        }

        /* Animaci√≥n de error */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

    </style>
</head>
<body>

    <h1>Sudoku</h1>

    <div id="difficulty-controls">
        <button id="btn-easy" class="diff-btn" onclick="startGame('easy')">F√°cil</button>
        <button id="btn-medium" class="diff-btn" onclick="startGame('medium')">Medio</button>
        <button id="btn-hard" class="diff-btn" onclick="startGame('hard')">Dif√≠cil</button>
    </div>

    <div id="stats-bar">
        <div class="streak-container">
            <span id="fire-icon" class="fire-icon">üî•</span> 
            <span id="streak-display">Racha: 0</span>
        </div>
        <span style="color: var(--primary); font-size: 0.9em;">Pistas: <span id="hints-display">0</span></span>
    </div>

    <div id="board"></div>
    
    <div id="controls-container">
        
        <div id="tools-row">
            <div id="pencil-btn" class="tool-btn" onclick="togglePencil()" title="Modo Notas (L√°piz)">‚úé</div>
            <div id="fast-btn" class="tool-btn" onclick="toggleFastMode()" title="Relleno R√°pido">‚ö°</div>
            <div class="tool-btn" onclick="useHint()" title="Pista" style="color: #fbc02d;">üí°</div>
            <div class="tool-btn" onclick="deleteAction()" title="Borrar">üßπ</div>
        </div>

        <div id="numbers-row">
            <div id="num-1" class="number-key" onclick="onNumberClick('1')">1</div>
            <div id="num-2" class="number-key" onclick="onNumberClick('2')">2</div>
            <div id="num-3" class="number-key" onclick="onNumberClick('3')">3</div>
            <div id="num-4" class="number-key" onclick="onNumberClick('4')">4</div>
            <div id="num-5" class="number-key" onclick="onNumberClick('5')">5</div>
            <div id="num-6" class="number-key" onclick="onNumberClick('6')">6</div>
            <div id="num-7" class="number-key" onclick="onNumberClick('7')">7</div>
            <div id="num-8" class="number-key" onclick="onNumberClick('8')">8</div>
            <div id="num-9" class="number-key" onclick="onNumberClick('9')">9</div>
        </div>
    </div>

    <script>
    // --- VARIABLES GLOBALES ---
    let numSelected = null;
    let tileSelected = null;
    let streak = 0; // CAMBIO: Racha en lugar de errores
    let hintsUsed = 0;
    let currentSolution = "";
    
    let isPencilMode = false;
    let isFastMode = false;
    let currentDifficulty = 'easy';

    // --- BASE DE DATOS OPTIMIZADA (30 plantillas base) ---
    const database = {
        easy: [
            { p: "53--7----6--195----98----6-8---6---34--8-3--17---2---6-6----28----419--5----8--79", s: "534678912672195348198342567859761423426853791713924856961537284287419635345286179" },
            { p: "1-58-2----9--764-52--4--819-19--73-6762-83-9-----61-5---76---3-43--2-5-16--3-89--", s: "145892367893176425276435819419527386762483591538961752951768234384295167627348915" },
            { p: "--86-3---3-6-5-84--4-----9-9-4-8--1---1---5---2--3-6-7-1-----2--32-7-9-8---5-13--", s: "852174369617529483394836521478691253532478916961253748745163892283917645126985437" },
            { p: "---26-7-168--7--9-19---45--82-1---4---46-29---5---3-28--93---74-4--5--367-3-18---", s: "435269781682571493197834526829156347374682915951743628519328674268495137743918256" },
            { p: "----754----------8-8-19----3----1-6--------34----6817-2-4---6-39------2-53-2-----", s: "291875463653429718784196352372581964815267534946358172127435896439617825568924713" },
            { p: "-96-4---11---6---45-481-39---795--43-3--8----4-5-23-18-1-63--59-59-7-83---359---7", s: "396245781178369254524817396287951643639482517415723918812634957591736842763598421" },
            { p: "3-65-84--52--------87----31--3-1--8-9--863--5-5--9-6--13----25--------74--52-6-3", s: "316578492529134768487629531263415987941863275758297614134786259892531874675249138" },
            { p: "---8-5---3------512---6---9-8----4----5---3----2----6-9---7---216------5---1-3---", s: "714895623398247516256163849683521497475986312129374568931478256842639175567152398" },
            { p: "2--5--1-9--1--36--6-----8---12---5-8-------7-4-8---21---3-----1--97--5--7-6--9--3", s: "237584169951273648648912835712396548896154723435827916563748291382961457174635982" },
            { p: "--49--1---2-6-8---9-----2--82-5--6-35---9---41-6--3-52--1-----7---3-5-8---8--19--", s: "374952168521648379986173245829514673537296814146837592691425837412385796765831924" }
        ],
        medium: [
            { p: "2---8-3---6--7--84-3-5--2-9---1-54-8---------4-27-6---3-1--7-4-72--4--6---4-1---3", s: "247981356965273184831564279679135428813429765542786913351697842728345691194812537" },
            { p: "-5-1-4----1-5---89---83--2------1-5--3-----1--6-2------4--63---28---7-4----9-1-3-", s: "852174369617529483394836521478691253532478916961253748745163892283917645126985437" },
            { p: "--2---3--84-3---9-91-----4----2-8-37-3-----2-52-4-9----7-----63-9---4-54--3---7--", s: "652794318847312695913586247169258437734169528528479163471825963296347851385691742" },
            { p: "-2-6-8---58---97------4----37----5--6-------4--8----13----2------98---36---3-6-9-", s: "124678935583129764796543182379261548612857394458936217961742853247985436835316429" },
            { p: "--41-----2---948---6-----1-8-------9--3-2-6--1-------8-8-----3---659---5-----12--", s: "954183276217694853368257914842576139793421685156389472681942537423659718579813246" },
            { p: "7-------4-5-2-6-3---2---8-------1---3-9---6---8-4-------5---3---9-7-2-1-1-------5", s: "736189524458276139912534867827651493349827651561943782275418936683975214194362758" },
            { p: "----9--5--6--1-4-----4---1-3--8------9-----6------5--3-4---7-----7-3--8--5--6----", s: "187396254563218479925475618314827596892541367756934821248169735631752984475863192" },
            { p: "--9--5-1----2-4---1---7--8-7----2--8--4-1-6--5--7----1-6--3---8-2-5----6-5--8--", s: "849365217375284961162179583713692458284513679596847321457921836831456792625738149" },
            { p: "---7-4--5-2--1--9------3-4-8----2-------6-------3----9-3-5------6--9-2--5--4-1---", s: "391764825725812396648953147817492563539286714264531978973158264186429753452376189" },
            { p: "----3---6---5--42---2--9---25-6------4-8-7-5------4-81---7--9---61--3---8---2----", s: "915832746783516429462749518251698374649827153378154286534761982296183547817425693" }
        ],
        hard: [
            { p: "---9---5-3-------8--82--7--1-----4-2-7--1--9-2-6-----7--1--72--7-------4-2---8---", s: "462971853357462918918253746185739462674815391239641587841527639793186245526394178" },
            { p: "------3-6-2---5--9-9----1-----7-2--3--3-6-2--6--3-8-----8----7-9--1---4-5-4------", s: "781496356426385719395271184159742683843961257672358491218534976937126845564817932" },
            { p: "--8-2-3---4-9---7-----81---7-5--2-9-9-------8-8-7--4-2---46-----1---5-9---8-7-2--", s: "658127349342958176297634815765412893913576248184793452539462781871235694426871539" },
            { p: "---5---------3-8-2--4---5-----1-6---8---9---5---4-7-----9---6--3-6-5---------1---", s: "912584376675931842834276519257146938841392765369857214728913654491625387583764192" },
            { p: "-6---9--2---1-6-4--8------16------2-3---8---4-9------81------6--5-6-3---2--1---9-", s: "467539812529186743381247659614758923372981564895623174136492587248765391953814265" },
            { p: "----3---1-1---6----59---8--4--------6--5-3--8--------7--2---16----1---7-8---4----", s: "268735941714986235359124876423871569671593428895462317547269183982317654136654792" },
            { p: "-5-------7-6-1-8---2---5----1-8--4---------9--8-3----9---2---6-3-6-7-1-------5-", s: "158943627796215834423765198217859463634127589589436712975382641841697253362571948" },
            { p: "---9---1----5-6---1--3------2-6-8---6-------7---1-7-5------9--5---4-3----8---7---", s: "567982413342516978198374265425698137681435297739127856876259341513748629245863715" },
            { p: "------4---9--3--6--5-1----3---9-5-----7---8-----2-1---3----6-2--6--8--3---1------", s: "613278459298435167754169283486925371132746895579813642345697128861582739927351684" },
            { p: "2-------6-3-8---9---6-2-------1---3-8---6---4-1-------5---8---2---4-5-6-------1", s: "254917386731846592986523147425198763897365214613274958569781432178432659342659871" }
        ]
    };

    window.onload = function() {
        startGame('easy');
    }

    // --- GAME ENGINE ---
    function startGame(difficulty) {
        currentDifficulty = difficulty;
        
        document.querySelectorAll('.diff-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById('btn-' + difficulty).classList.add('active');

        // Reset
        streak = 0;
        hintsUsed = 0;
        updateStats();
        
        clearSelections();
        isPencilMode = false;
        isFastMode = false;
        updateToolVisuals();
        
        document.getElementById("board").innerHTML = ""; 

        // Permutaci√≥n M√°gica
        let gamesList = database[difficulty];
        let randomIndex = Math.floor(Math.random() * gamesList.length);
        let baseGame = gamesList[randomIndex];
        let newGameData = getPermutedGame(baseGame.p, baseGame.s);

        let currentBoardString = newGameData.puzzle;
        currentSolution = newGameData.solution;

        // Renderizado Tablero
        for (let i = 0; i < 81; i++) {
            let tile = document.createElement("div");
            tile.id = i.toString();
            let char = currentBoardString.charAt(i);
            
            if (char !== "-") {
                tile.innerText = char;
                tile.classList.add("tile-start"); 
            }

            // Bordes 3x3
            let col = i % 9;
            let row = Math.floor(i / 9);
            if (col === 2 || col === 5) tile.style.borderRight = "2px solid var(--primary-dark)";
            if (row === 2 || row === 5) tile.style.borderBottom = "2px solid var(--primary-dark)";

            tile.addEventListener("click", onTileClick);
            tile.classList.add("tile");
            document.getElementById("board").append(tile);
        }

        checkCompletedNumbers();
    }

    function getPermutedGame(puzzle, solution) {
        let nums = ['1','2','3','4','5','6','7','8','9'];
        for (let i = nums.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [nums[i], nums[j]] = [nums[j], nums[i]];
        }
        
        function mapString(str) {
            let result = "";
            for(let i=0; i<str.length; i++) {
                let char = str.charAt(i);
                if(char === "-") result += "-";
                else {
                    let index = parseInt(char) - 1;
                    result += nums[index];
                }
            }
            return result;
        }

        return {
            puzzle: mapString(puzzle),
            solution: mapString(solution)
        };
    }

    // --- HERRAMIENTAS ---
    function togglePencil() {
        isPencilMode = !isPencilMode;
        updateToolVisuals();
    }

    function toggleFastMode() {
        isFastMode = !isFastMode;
        clearSelections();
        updateToolVisuals();
    }
    
    function updateToolVisuals() {
        let pBtn = document.getElementById("pencil-btn");
        let fBtn = document.getElementById("fast-btn");
        
        if (pBtn) isPencilMode ? pBtn.classList.add("pencil-active") : pBtn.classList.remove("pencil-active");
        
        if (fBtn) isFastMode ? fBtn.classList.add("fast-active") : fBtn.classList.remove("fast-active");
        
        if (!isFastMode) {
            numSelected = null;
            document.querySelectorAll(".number-key").forEach(n => n.classList.remove("number-selected"));
        }
    }

    function useHint() {
        if (isFastMode) { alert("Desactiva el modo r√°pido para usar pistas."); return; }
        if (!tileSelected) { alert("Selecciona una casilla vac√≠a."); return; }
        if (tileSelected.classList.contains("tile-start") || tileSelected.classList.contains("tile-correct")) return;

        let position = parseInt(tileSelected.id);
        let correctNum = currentSolution.charAt(position);

        tileSelected.innerHTML = correctNum;
        tileSelected.classList.remove("tile-incorrect");
        tileSelected.classList.add("tile-correct");
        
        hintsUsed++;
        updateStats();
        updateHighlights();
        checkCompletedNumbers();
    }

    function deleteAction() {
        if (tileSelected && !tileSelected.classList.contains("tile-start") && !tileSelected.classList.contains("tile-correct")) {
            tileSelected.innerHTML = "";
            tileSelected.classList.remove("tile-incorrect");
            updateHighlights();
        }
    }

    // --- INTERACCI√ìN ---
    function onTileClick() {
        let clickedTile = this;
        if (isFastMode) {
            if (numSelected) applyMove(clickedTile, numSelected);
            return;
        }
        if (tileSelected) tileSelected.classList.remove("tile-selected");
        tileSelected = clickedTile;
        tileSelected.classList.add("tile-selected");
        updateHighlights();
    }

    function onNumberClick(numberClicked) {
        let btn = document.getElementById("num-" + numberClicked);
        if (btn && btn.classList.contains("number-done")) return;

        if (isFastMode) {
            numSelected = numberClicked;
            document.querySelectorAll(".number-key").forEach(n => n.classList.remove("number-selected"));
            if(btn) btn.classList.add("number-selected");
            highlightSameNumbers(numberClicked);
            return;
        }
        if (tileSelected) applyMove(tileSelected, numberClicked);
    }

    function applyMove(tile, number) {
        if (tile.classList.contains("tile-start") || tile.classList.contains("tile-correct")) return;

        // L√°piz
        if (isPencilMode) {
            if (tile.innerText.length === 1 && !tile.querySelector(".pencil-grid")) return;
            let grid = tile.querySelector(".pencil-grid");
            if (!grid) {
                tile.innerText = "";
                grid = document.createElement("div");
                grid.classList.add("pencil-grid");
                for(let i=1; i<=9; i++) {
                    let note = document.createElement("div");
                    note.classList.add("pencil-number");
                    grid.appendChild(note);
                }
                tile.appendChild(grid);
            }
            let notePlace = grid.children[number - 1];
            notePlace.innerText = (notePlace.innerText === number) ? "" : number;
            return;
        }

        // Move Normal
        tile.innerHTML = number;
        let position = parseInt(tile.id);
        let correctNumber = currentSolution.charAt(position);

        if (number === correctNumber) {
            // ACIERTO
            tile.classList.remove("tile-incorrect");
            tile.classList.add("tile-correct");
            
            // --- L√ìGICA DE RACHA ---
            streak++; // Sumamos
            animateStreak();

            if (!isFastMode) updateHighlights();
            else highlightSameNumbers(numSelected);
            checkCompletedNumbers();
        } else {
            // ERROR
            tile.classList.add("tile-incorrect");
            tile.classList.remove("tile-correct");
            
            // --- L√ìGICA DE RACHA ---
            streak = 0; // Reiniciamos
            updateStats();
        }
    }

    // --- HELPERS ---
    function checkCompletedNumbers() {
        let counts = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0};
        let allTiles = document.querySelectorAll(".tile");
        allTiles.forEach(tile => {
            if (!tile.querySelector(".pencil-grid") && tile.innerText !== "") {
                if (tile.classList.contains("tile-start") || tile.classList.contains("tile-correct")) {
                    let num = parseInt(tile.innerText);
                    if (num >= 1 && num <= 9) counts[num]++;
                }
            }
        });

        for (let i = 1; i <= 9; i++) {
            let btn = document.getElementById("num-" + i);
            if (btn) {
                if (counts[i] === 9) {
                    btn.classList.add("number-done");
                    if (isFastMode && numSelected == i) {
                        btn.classList.remove("number-selected");
                        numSelected = null;
                        document.querySelectorAll(".highlight-same").forEach(el => el.classList.remove("highlight-same"));
                    }
                } else {
                    btn.classList.remove("number-done");
                }
            }
        }
    }

    function updateStats() {
        document.getElementById("streak-display").innerText = "Racha: " + streak;
        document.getElementById("hints-display").innerText = hintsUsed;
        
        let fire = document.getElementById("fire-icon");
        if(streak > 0) fire.style.opacity = "1";
        else fire.style.opacity = "0.2"; // Apagar fuego si es 0
    }
    
    function animateStreak() {
        updateStats();
        let fire = document.getElementById("fire-icon");
        fire.classList.add("streak-animate");
        setTimeout(() => fire.classList.remove("streak-animate"), 200);
    }

    function clearSelections() {
        if (tileSelected) tileSelected.classList.remove("tile-selected");
        tileSelected = null;
        document.querySelectorAll(".tile").forEach(t => {
            t.classList.remove("highlight-related");
            t.classList.remove("highlight-same");
        });
    }

    function updateHighlights() {
        document.querySelectorAll(".tile").forEach(t => {
            t.classList.remove("highlight-related");
            t.classList.remove("highlight-same");
        });

        if (!tileSelected) return;

        let currentId = parseInt(tileSelected.id);
        let currentRow = Math.floor(currentId / 9);
        let currentCol = currentId % 9;
        let val = (!tileSelected.querySelector(".pencil-grid")) ? tileSelected.innerText : null;

        for (let i = 0; i < 81; i++) {
            let row = Math.floor(i / 9);
            let col = i % 9;
            let tile = document.getElementById(i.toString());
            
            if (row === currentRow || col === currentCol) {
                if (i !== currentId) tile.classList.add("highlight-related");
            }
            if (val && tile.innerText === val && !tile.querySelector(".pencil-grid")) {
                tile.classList.add("highlight-same");
            }
        }
    }

    function highlightSameNumbers(number) {
        document.querySelectorAll(".tile").forEach(t => t.classList.remove("highlight-same"));
        document.querySelectorAll(".tile").forEach(tile => {
            if (tile.innerText === number && !tile.querySelector(".pencil-grid")) {
                tile.classList.add("highlight-same");
            }
        });
    }
    </script>
</body>
</html>